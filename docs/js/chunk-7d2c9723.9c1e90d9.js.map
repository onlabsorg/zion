{"version":3,"sources":["webpack:///./node_modules/@onlabsorg/olowiki/src/components/olo-document.vue?7d23","webpack:///./node_modules/vue-async-computed/dist/vue-async-computed.esm.js","webpack:///node_modules/@onlabsorg/olowiki/src/components/olo-document.vue","webpack:///./node_modules/@onlabsorg/olowiki/src/components/olo-document.vue?fb01","webpack:///./node_modules/@onlabsorg/olowiki/src/components/olo-document.vue","webpack:///./node_modules/@onlabsorg/olowiki/src/components/olo-document.vue?c394"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","mode","text","_e","model","value","callback","$$v","editorContent","expression","staticRenderFns","setAsyncState","vm","stateObject","state","$set","$data","_asyncComputed","getterOnly","fn","get","object","property","Object","prototype","hasOwnProperty","call","isComputedLazy","item","lazy","isLazyActive","key","lazyActivePrefix","lazyDataPrefix","initLazy","data","makeLazyComputed","set","silentSetLazy","silentGetLazy","getGetterWatchedByArray","computedAsyncProperty","_this","watch","forEach","splittedByDot","split","length","start","part","error","console","getGetterWatchedByFunction","getWatchedGetter","Array","isArray","Error","DidNotUpdate","Symbol","getGetterWithShouldUpdate","asyncProprety","currentGetter","shouldUpdate","shouldNotUpdate","prefix","AsyncComputed","install","Vue","pluginOptions","config","optionMergeStrategies","asyncComputed","computed","mixin","$asyncComputed","beforeCreate","$options","keys","getter","getterFn","initDataWithAsyncComputed","created","generateDefault","_key","handleAsyncComputedPropetyChanges","promiseId","watcher","newPromise","thisPromise","then","Promise","resolve","catch","err","errorHandler","handler","undefined","bind","useRawError","stack","exception","update","_isDestroyed","apply","$watch","immediate","options","optionData","nonLazy","defaultValue","default","window","use","name","components","props","source","context","path","evaluate","fileContent","doc","methods","createDocument","commit","save","delete","component","VCard"],"mappings":"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","file":"js/chunk-7d2c9723.9c1e90d9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"olo-document\",attrs:{\"elevation\":\"1\",\"rounded\":\"lg\"}},[(_vm.mode == 'view')?_c('olo-viewer',{attrs:{\"html\":_vm.text}}):_vm._e(),(_vm.mode == 'edit')?_c('olo-editor',{attrs:{\"theme\":\"idle_fingers\",\"fontsize\":\"14\"},model:{value:(_vm.editorContent),callback:function ($$v) {_vm.editorContent=$$v},expression:\"editorContent\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function setAsyncState(vm, stateObject, state) {\n  vm.$set(vm.$data._asyncComputed[stateObject], 'state', state);\n  vm.$set(vm.$data._asyncComputed[stateObject], 'updating', state === 'updating');\n  vm.$set(vm.$data._asyncComputed[stateObject], 'error', state === 'error');\n  vm.$set(vm.$data._asyncComputed[stateObject], 'success', state === 'success');\n}\n\nfunction getterOnly(fn) {\n  if (typeof fn === 'function') return fn;\n\n  return fn.get;\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction isComputedLazy(item) {\n  return hasOwnProperty(item, 'lazy') && item.lazy;\n}\n\nfunction isLazyActive(vm, key) {\n  return vm[lazyActivePrefix + key];\n}\n\nvar lazyActivePrefix = 'async_computed$lazy_active$',\n    lazyDataPrefix = 'async_computed$lazy_data$';\n\nfunction initLazy(data, key, value) {\n  data[lazyActivePrefix + key] = false;\n  data[lazyDataPrefix + key] = value;\n}\n\nfunction makeLazyComputed(key) {\n  return {\n    get: function get() {\n      this[lazyActivePrefix + key] = true;\n      return this[lazyDataPrefix + key];\n    },\n    set: function set(value) {\n      this[lazyDataPrefix + key] = value;\n    }\n  };\n}\n\nfunction silentSetLazy(vm, key, value) {\n  vm[lazyDataPrefix + key] = value;\n}\nfunction silentGetLazy(vm, key) {\n  return vm[lazyDataPrefix + key];\n}\n\nvar getGetterWatchedByArray = function getGetterWatchedByArray(computedAsyncProperty) {\n  return function getter() {\n    var _this = this;\n\n    computedAsyncProperty.watch.forEach(function (key) {\n      // Check if nested key is watched.\n      var splittedByDot = key.split('.');\n      if (splittedByDot.length === 1) {\n        // If not, just access it.\n        // eslint-disable-next-line no-unused-expressions\n        _this[key];\n      } else {\n        // Access the nested propety.\n        try {\n          var start = _this;\n          splittedByDot.forEach(function (part) {\n            start = start[part];\n          });\n        } catch (error) {\n          console.error('AsyncComputed: bad path: ', key);\n          throw error;\n        }\n      }\n    });\n    return computedAsyncProperty.get.call(this);\n  };\n};\n\nvar getGetterWatchedByFunction = function getGetterWatchedByFunction(computedAsyncProperty) {\n  return function getter() {\n    computedAsyncProperty.watch.call(this);\n    return computedAsyncProperty.get.call(this);\n  };\n};\n\nfunction getWatchedGetter(computedAsyncProperty) {\n  if (typeof computedAsyncProperty.watch === 'function') {\n    return getGetterWatchedByFunction(computedAsyncProperty);\n  } else if (Array.isArray(computedAsyncProperty.watch)) {\n    computedAsyncProperty.watch.forEach(function (key) {\n      if (typeof key !== 'string') {\n        throw new Error('AsyncComputed: watch elemnts must be strings');\n      }\n    });\n    return getGetterWatchedByArray(computedAsyncProperty);\n  } else {\n    throw Error('AsyncComputed: watch should be function or an array');\n  }\n}\n\nvar DidNotUpdate = typeof Symbol === 'function' ? Symbol('did-not-update') : {};\n\nvar getGetterWithShouldUpdate = function getGetterWithShouldUpdate(asyncProprety, currentGetter) {\n  return function getter() {\n    return asyncProprety.shouldUpdate.call(this) ? currentGetter.call(this) : DidNotUpdate;\n  };\n};\n\nvar shouldNotUpdate = function shouldNotUpdate(value) {\n  return DidNotUpdate === value;\n};\n\nvar prefix = '_async_computed$';\n\nvar AsyncComputed = {\n  install: function install(Vue, pluginOptions) {\n    pluginOptions = pluginOptions || {};\n\n    Vue.config.optionMergeStrategies.asyncComputed = Vue.config.optionMergeStrategies.computed;\n\n    Vue.mixin({\n      data: function data() {\n        return {\n          _asyncComputed: {}\n        };\n      },\n\n      computed: {\n        $asyncComputed: function $asyncComputed() {\n          return this.$data._asyncComputed;\n        }\n      },\n      beforeCreate: function beforeCreate() {\n        var asyncComputed = this.$options.asyncComputed || {};\n\n        if (!Object.keys(asyncComputed).length) return;\n\n        for (var key in asyncComputed) {\n          var getter = getterFn(key, asyncComputed[key]);\n          this.$options.computed[prefix + key] = getter;\n        }\n\n        this.$options.data = initDataWithAsyncComputed(this.$options, pluginOptions);\n      },\n      created: function created() {\n        for (var key in this.$options.asyncComputed || {}) {\n          var item = this.$options.asyncComputed[key],\n              value = generateDefault.call(this, item, pluginOptions);\n          if (isComputedLazy(item)) {\n            silentSetLazy(this, key, value);\n          } else {\n            this[key] = value;\n          }\n        }\n\n        for (var _key in this.$options.asyncComputed || {}) {\n          handleAsyncComputedPropetyChanges(this, _key, pluginOptions, Vue);\n        }\n      }\n    });\n  }\n};\n\nfunction handleAsyncComputedPropetyChanges(vm, key, pluginOptions, Vue) {\n  var promiseId = 0;\n  var watcher = function watcher(newPromise) {\n    var thisPromise = ++promiseId;\n\n    if (shouldNotUpdate(newPromise)) return;\n\n    if (!newPromise || !newPromise.then) {\n      newPromise = Promise.resolve(newPromise);\n    }\n    setAsyncState(vm, key, 'updating');\n\n    newPromise.then(function (value) {\n      if (thisPromise !== promiseId) return;\n      setAsyncState(vm, key, 'success');\n      vm[key] = value;\n    }).catch(function (err) {\n      if (thisPromise !== promiseId) return;\n\n      setAsyncState(vm, key, 'error');\n      Vue.set(vm.$data._asyncComputed[key], 'exception', err);\n      if (pluginOptions.errorHandler === false) return;\n\n      var handler = pluginOptions.errorHandler === undefined ? console.error.bind(console, 'Error evaluating async computed property:') : pluginOptions.errorHandler;\n\n      if (pluginOptions.useRawError) {\n        handler(err, vm, err.stack);\n      } else {\n        handler(err.stack);\n      }\n    });\n  };\n  Vue.set(vm.$data._asyncComputed, key, {\n    exception: null,\n    update: function update() {\n      if (!vm._isDestroyed) {\n        watcher(getterOnly(vm.$options.asyncComputed[key]).apply(vm));\n      }\n    }\n  });\n  setAsyncState(vm, key, 'updating');\n  vm.$watch(prefix + key, watcher, { immediate: true });\n}\n\nfunction initDataWithAsyncComputed(options, pluginOptions) {\n  var optionData = options.data;\n  var asyncComputed = options.asyncComputed || {};\n\n  return function vueAsyncComputedInjectedDataFn(vm) {\n    var data = (typeof optionData === 'function' ? optionData.call(this, vm) : optionData) || {};\n    for (var key in asyncComputed) {\n      var item = this.$options.asyncComputed[key];\n\n      var value = generateDefault.call(this, item, pluginOptions);\n      if (isComputedLazy(item)) {\n        initLazy(data, key, value);\n        this.$options.computed[key] = makeLazyComputed(key);\n      } else {\n        data[key] = value;\n      }\n    }\n    return data;\n  };\n}\n\nfunction getterFn(key, fn) {\n  if (typeof fn === 'function') return fn;\n\n  var getter = fn.get;\n\n  if (hasOwnProperty(fn, 'watch')) {\n    getter = getWatchedGetter(fn);\n  }\n\n  if (hasOwnProperty(fn, 'shouldUpdate')) {\n    getter = getGetterWithShouldUpdate(fn, getter);\n  }\n\n  if (isComputedLazy(fn)) {\n    var nonLazy = getter;\n    getter = function lazyGetter() {\n      if (isLazyActive(this, key)) {\n        return nonLazy.call(this);\n      } else {\n        return silentGetLazy(this, key);\n      }\n    };\n  }\n  return getter;\n}\n\nfunction generateDefault(fn, pluginOptions) {\n  var defaultValue = null;\n\n  if ('default' in fn) {\n    defaultValue = fn.default;\n  } else if ('default' in pluginOptions) {\n    defaultValue = pluginOptions.default;\n  }\n\n  if (typeof defaultValue === 'function') {\n    return defaultValue.call(this);\n  } else {\n    return defaultValue;\n  }\n}\n\n/* istanbul ignore if */\nif (typeof window !== 'undefined' && window.Vue) {\n  // Auto install in dist mode\n  window.Vue.use(AsyncComputed);\n}\n\nexport default AsyncComputed;\n","<template>\n    <v-card class=\"olo-document\" elevation=\"1\" rounded=\"lg\">\n        \n        <olo-viewer\n            v-if=\"mode == 'view'\"\n            :html=\"text\"\n            >\n        </olo-viewer>\n        \n        <olo-editor \n            v-if=\"mode == 'edit'\"\n            v-model=\"editorContent\"\n            theme=\"idle_fingers\"\n            fontsize=\"14\"\n            >\n        </olo-editor>\n        \n    </v-card>\n</template>\n\n<script>\n    import Vue from 'vue';\n    import AsyncComputed from 'vue-async-computed';\n    Vue.use(AsyncComputed);\n\n    export default {\n        name: \"olo-document\",\n        \n        components: {\n            'olo-viewer': () => import('./olo-viewer'),\n            'olo-editor': () => import('./olo-editor'),\n        },    \n        \n        props: ['store', 'docid', 'mode', 'presets'],\n        \n        data: () => ({\n            source: \"\",\n            editorContent: \"\",\n        }),\n        \n        computed: {\n            \n            context () {\n                return this.store ? this.createDocument().createContext(this.presets) : {};\n            },\n            \n            path () {\n                return this.docid.split('?')[0];\n            },\n            \n            evaluate () {\n                return this.createDocument(this.source).parse();\n            },\n\n            text () {\n                return this.doc.text;\n            },\n            \n            data () {\n                return this.doc.data;\n            }\n        },\n        \n        asyncComputed: {\n            \n            fileContent: {\n                \n                async get () {\n                    try {\n                        return this.store.read(this.path);\n                    } catch (error) {\n                        return `<p><b>Failed to load ${this.path}</b></p>\n                                <code><pre>${error.message}</pre></code>`\n                    }\n                },\n                \n                default: \"\"\n            },\n\n            doc: {\n                \n                async get () {\n                    return this.evaluate(this.context);\n                },\n                \n                default: {text:\"\", data:{}}\n            }\n        },\n        \n        watch: {\n            \n            fileContent () {\n                this.source = this.fileContent;\n            },\n            \n            source () {\n                this.editorContent = this.source;\n            },\n            \n            doc () {\n                this.$emit('doc-rendered', this.doc.data);\n            }\n        },\n        \n        methods: {\n            \n            createDocument (source=\"\") {\n                return new this.store.constructor.Document(this.store, this.docid, source);\n            },\n            \n            commit () {\n                this.source = this.editorContent;\n            },\n            \n            async save () {\n                this.commit();\n                await this.store.write(this.path, this.source);\n            },\n            \n            async delete () {\n                await this.store.delete(this.path);\n                this.source = \"\";\n            }\n        }\n    }\n</script>\n\n<style>\n\n    .olo-document {\n        height: 100%;\n    }\n\n</style>","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./olo-document.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./olo-document.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./olo-document.vue?vue&type=template&id=44b92276&\"\nimport script from \"./olo-document.vue?vue&type=script&lang=js&\"\nexport * from \"./olo-document.vue?vue&type=script&lang=js&\"\nimport style0 from \"./olo-document.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard})\n","export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./olo-document.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}